# LyraPointer 手势说明

本文档详细介绍 LyraPointer 支持的所有手势及其用法。

---

## 目录

1. [手势概述](#手势概述)
2. [基础手势](#基础手势)
3. [点击手势](#点击手势)
4. [滚动手势](#滚动手势)
5. [控制手势](#控制手势)
6. [手势技巧](#手势技巧)
7. [自定义手势](#自定义手势)

---

## 手势概述

LyraPointer 使用摄像头识别手部 21 个关键点，通过分析手指的伸出状态和指尖距离来判断手势类型。

### 检测原理

| 判断方式 | 说明 |
|----------|------|
| 手指伸出 | 指尖位置高于指关节（Y 坐标更小） |
| 拇指伸出 | 拇指尖端远离手掌（X 坐标判断） |
| 捏合检测 | 两指尖之间的欧氏距离小于阈值 |

### 控制区域

默认情况下，只有手部在画面中央区域（15%-85%）时才会触发控制，这是为了：

- 避免边缘区域的误触
- 提供更舒适的操作范围
- 减少手臂疲劳

---

## 基础手势

### 👆 指针模式（Pointer）

**动作**：移动鼠标光标

**手势**：只伸出食指，其他手指弯曲

```
     👆
    /
   🤚 (握拳，食指伸出)
```

**说明**：
- 这是最常用的手势
- 食指尖端位置对应屏幕光标位置
- 移动手即可移动鼠标

**技巧**：
- 保持手势稳定，避免其他手指意外伸出
- 使用平滑的动作，避免快速抖动

---

### ✊ 握拳（Fist）

**动作**：休息状态，无操作

**手势**：所有手指弯曲握拳

```
   ✊ (握拳)
```

**说明**：
- 用于暂时停止控制而不离开摄像头视野
- 系统会忽略握拳状态

**技巧**：
- 需要休息时切换到握拳
- 从握拳到指针模式转换流畅

---

### ✋ 手掌张开（Palm）

**动作**：暂停/恢复控制

**手势**：五指完全张开

```
   🖐️ (五指张开)
```

**说明**：
- 需要保持约 1 秒才会触发
- 再次张开手掌可恢复控制
- 暂停时屏幕会显示 "PAUSED" 提示

**技巧**：
- 确保五指完全伸直
- 保持手势稳定 1 秒以上

---

## 点击手势

### 👌 左键点击（Click）

**动作**：鼠标左键单击

**手势**：拇指和食指捏合（指尖靠近）

```
   👌 (OK 手势)
```

**说明**：
- 两指尖距离小于阈值（默认 5%）时触发
- 需要保持几帧防止误触
- 松开后返回指针模式

**技巧**：
- 轻轻捏合即可，不需要用力
- 捏合时保持手部位置稳定

---

### 👌👌 双击（Double Click）

**动作**：鼠标左键双击

**手势**：快速捏合两次

```
   👌 → 👆 → 👌 (快速两次)
```

**说明**：
- 两次捏合间隔需要小于 300ms
- 用于打开文件、选中单词等

**技巧**：
- 练习快速捏合和松开的节奏
- 不要移动手部位置

---

### 🤏 右键点击（Right Click）

**动作**：鼠标右键单击

**手势**：拇指和**中指**捏合

```
   🤏 (拇指+中指)
```

**说明**：
- 注意是中指而不是食指
- 用于打开右键菜单

**技巧**：
- 食指可以稍微弯曲避免干扰
- 确保是中指和拇指靠近

---

### ✊→👌 拖拽（Drag）

**动作**：鼠标左键按住拖拽

**手势**：捏合并保持，然后移动

```
   👌 (捏合保持) → 移动手 → 👆 (松开)
```

**说明**：
- 捏合保持超过一定帧数后进入拖拽模式
- 移动手时鼠标保持按下状态
- 松开捏合结束拖拽

**技巧**：
- 先稳定捏合，等待进入拖拽模式
- 拖拽过程中保持捏合
- 到达目标位置后松开

---

## 滚动手势

### ✌️ 滚动模式（Scroll）

**动作**：进入滚动模式

**手势**：食指和中指同时伸出（剪刀手）

```
   ✌️ (和平/胜利手势)
```

**说明**：
- 进入滚动模式后，上下移动手可以滚动页面
- 无名指和小指需要弯曲

---

### ✌️↑ 向上滚动（Scroll Up）

**动作**：页面向上滚动

**手势**：滚动模式下手向上移动

```
   ✌️ ↑ (手向上移动)
```

**说明**：
- 移动幅度超过阈值时触发滚动
- 滚动速度可在配置中调整

---

### ✌️↓ 向下滚动（Scroll Down）

**动作**：页面向下滚动

**手势**：滚动模式下手向下移动

```
   ✌️ ↓ (手向下移动)
```

**说明**：
- 与向上滚动相反
- 适合浏览网页、文档

---

## 控制手势

### ⏸️ 暂停控制

**方法 1**：手掌张开（✋）保持 1 秒

**方法 2**：按键盘 `P` 键

**说明**：
- 暂停后手势不会触发任何操作
- 画面显示 "PAUSED" 提示
- 系统托盘图标变灰

---

### ▶️ 恢复控制

**方法 1**：再次手掌张开（✋）保持 1 秒

**方法 2**：按键盘 `P` 键

**说明**：
- 恢复后可以正常使用手势控制

---

## 手势技巧

### 提高识别准确率

1. **光线充足**：确保环境光线良好，避免背光
2. **背景简洁**：避免复杂背景干扰检测
3. **适当距离**：手与摄像头保持 30-60cm 距离
4. **正面朝向**：手掌正面对着摄像头

### 减少抖动

1. **手臂支撑**：将手肘放在桌面上
2. **调整平滑度**：增加配置中的 `smoothing` 值
3. **避免快速移动**：平稳移动手部

### 避免误触

1. **使用控制区域**：在画面中央区域操作
2. **手势明确**：确保手指状态清晰
3. **适当休息**：累了就握拳休息

---

## 自定义手势

### 配置文件

手势可以在 `config/gestures.yaml` 中配置：

```yaml
gestures:
  # 点击配置
  click:
    description: "点击 - 拇指食指捏合"
    type: "pinch"
    fingers: ["thumb", "index"]
    threshold: 0.05  # 捏合阈值
    action: "left_click"
    hold_frames: 3   # 防误触帧数
    
  # 右键配置
  right_click:
    description: "右键 - 拇指中指捏合"
    type: "pinch"
    fingers: ["thumb", "middle"]
    threshold: 0.05
    action: "right_click"
    hold_frames: 3
```

### 可调参数

| 参数 | 说明 | 默认值 |
|------|------|--------|
| `threshold` | 捏合判定距离 | 0.05 |
| `hold_frames` | 触发所需帧数 | 3 |
| `double_click_interval` | 双击间隔 (ms) | 300 |

### 灵敏度调整

在 `config/gestures.yaml` 中调整：

```yaml
settings:
  sensitivity: 1.5    # 鼠标灵敏度 (0.1-5.0)
  smoothing: 0.8      # 平滑系数 (0-0.99)
  scroll_speed: 5     # 滚动速度 (1-20)
```

---

## 手势对照表

| 手势 | 图示 | 动作 | 触发条件 |
|------|------|------|----------|
| 指针 | 👆 | 移动鼠标 | 只有食指伸出 |
| 左键 | 👌 | 单击 | 拇指+食指捏合 |
| 右键 | 🤏 | 右键 | 拇指+中指捏合 |
| 双击 | 👌👌 | 双击 | 快速捏合两次 |
| 拖拽 | 👌→ | 拖拽 | 捏合保持并移动 |
| 滚动 | ✌️ | 滚动模式 | 食指+中指伸出 |
| 暂停 | ✋ | 暂停控制 | 五指张开保持 |
| 休息 | ✊ | 无操作 | 握拳 |

---

## 常见问题

### Q: 手势识别不准确？

A: 检查以下几点：
- 光线是否充足
- 手是否在控制区域内
- 背景是否太复杂
- 手势是否做到位

### Q: 鼠标抖动严重？

A: 尝试：
- 增加 `smoothing` 配置值
- 将手臂放在支撑物上
- 减少环境干扰

### Q: 点击经常误触？

A: 尝试：
- 增加 `hold_frames` 值
- 减小 `threshold` 值（更严格）
- 确保捏合动作清晰

---

## 下一步

- [配置详解](configuration.md) - 了解所有配置选项
- [故障排除](troubleshooting.md) - 解决常见问题
- [插件开发](plugins.md) - 创建自定义手势